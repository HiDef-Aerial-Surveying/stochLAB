<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Tool for running Collision Risk Models for seabirds on
    offshore wind farms. The base deterministic model is derived from 
    Band (2012) Using a Collision Risk Model to Assess Bird Collision Risks 
    for Offshore Wind Farms. This was further expanded on by 
    Masden (2015) &lt;doi:10.7489/1659-1&gt; and code used here is heavily derived
    from this work with input from Dr A. Cook at the British Trust for
    Ornithology. ">
<title>Stochastic Collision Risk Model • stochLAB</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Stochastic Collision Risk Model">
<meta property="og:description" content="Tool for running Collision Risk Models for seabirds on
    offshore wind farms. The base deterministic model is derived from 
    Band (2012) Using a Collision Risk Model to Assess Bird Collision Risks 
    for Offshore Wind Farms. This was further expanded on by 
    Masden (2015) &lt;doi:10.7489/1659-1&gt; and code used here is heavily derived
    from this work with input from Dr A. Cook at the British Trust for
    Ornithology. ">
<meta property="og:image" content="https://hidef-aerial-surveying.github.io/stochLAB/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">stochLAB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/Running_stochLAB.html">Running stochLAB</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/HiDef-Aerial-Surveying/stochLAB/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><p><a href="https://github.com/HiDef-Aerial-Surveying/stochLAB/actions/workflows/test-coverage.yaml" class="external-link"><img src="https://github.com/HiDef-Aerial-Surveying/stochLAB/actions/workflows/test-coverage.yaml/badge.svg" alt="test-coverage"></a> <a href="https://github.com/HiDef-Aerial-Surveying/stochLAB/actions/workflows/pkgdown.yaml" class="external-link"><img src="https://github.com/HiDef-Aerial-Surveying/stochLAB/actions/workflows/pkgdown.yaml/badge.svg" alt="pkgdown"></a> <a href="https://github.com/HiDef-Aerial-Surveying/stochLAB/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/HiDef-Aerial-Surveying/stochLAB/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a> <a href="https://github.com/HiDef-Aerial-Surveying/stochLAB/actions/workflows/pkgcheck.yaml" class="external-link"><img src="https://github.com/HiDef-Aerial-Surveying/stochLAB/actions/workflows/pkgcheck.yaml/badge.svg" alt="pkgcheck"></a></p>
<div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="stochlab-">stochLAB <a class="anchor" aria-label="anchor" href="#stochlab-"></a>
</h1>
</div>
<!-- badges: start --><!-- badges: end --><p><a href="https://github.com/HiDef-Aerial-Surveying/stochLAB" class="external-link">stochLAB</a> is a tool to run Collision Risk Models (CRMs) for seabirds on offshore wind farms.</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <a href="https://github.com/HiDef-Aerial-Surveying/stochLAB" class="external-link">stochLAB</a> package is an adaptation of the <a href="https://data.marine.gov.scot/dataset/developing-avian-collision-risk-model-incorporate-variability-and-uncertainty-r-code-0" class="external-link">R code</a> developed by <a href="https://data.marine.gov.scot/dataset/developing-avian-collision-risk-model-incorporate-variability-and-uncertainty" class="external-link">Masden (2015)</a> to incorporate variability and uncertainty in the avian collision risk model originally developed by <a href="https://www.bto.org/sites/default/files/u28/downloads/Projects/Final_Report_SOSS02_Band1ModelGuidance.pdf" class="external-link">Band (2012)</a>.</p>
<p>The <a href="https://github.com/HiDef-Aerial-Surveying/stochLAB" class="external-link">stochLAB</a> package was compiled and curated by DMP Statistics and HiDef Aerial Surveying.</p>
<p>Code developed under <a href="https://github.com/HiDef-Aerial-Surveying/stochLAB" class="external-link">stochLAB</a> substantially re-factored and re-structured Masden’s (heavily script-based) implementation into a user-friendly, streamlined, well documented and easily distributed tool. Furthermore, the package lays down the code infrastructure for easier incorporation of new functionality, e.g. extra parameter sampling features, model expansions, etc.</p>
<p>In addition, previous code underpinning core calculations for the extended model has been replaced by an alternative approach, resulting in significant gains in computational speed - over 30x faster than Masden’s code. This optimization is particularly beneficial under a stochastic context, when core calculations are called repeatedly during simulations.</p>
<p>For a more detailed overview type <code><a href="reference/stochLAB.html">?stochLAB</a></code>, once installed!</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<!-- You can install the released version of stochLAB from [CRAN](https://CRAN.R-project.org) with: --><!-- ``` r --><!-- install.packages("stochLAB") --><!-- ``` --><p>You can install the development version with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"HiDef-Aerial-Surveying/stochLAB"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="simple-example">Simple example<a class="anchor" aria-label="anchor" href="#simple-example"></a>
</h3>
<p>This is a basic example of running the stochastic collision model for one seabird species and one turbine/wind-farm scenario, with fictional input parameter data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/HiDef-Aerial-Surveying/stochLAB" class="external-link">stochLAB</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ------------------------------------------------------</span></span>
<span><span class="co"># Setting some of the required inputs upfront</span></span>
<span></span>
<span><span class="va">b_dens</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="va">month.abb</span>,</span>
<span>  mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">0.8</span>, <span class="fl">1.5</span><span class="op">)</span>,</span>
<span>  sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generic FHD bootstraps for one species, from Johnson et al (2014)</span></span>
<span><span class="va">fhd_boots</span> <span class="op">&lt;-</span> <span class="va">generic_fhd_bootstraps</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># wind speed vs rotation speed vs pitch</span></span>
<span><span class="va">wind_rtn_ptch</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  wind_speed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span>,</span>
<span>  rtn_speed <span class="op">=</span> <span class="fl">10</span><span class="op">/</span><span class="op">(</span><span class="fl">30</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>  bld_pitch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">90</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">8</span><span class="op">)</span>, <span class="fl">5</span><span class="op">:</span><span class="fl">22</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># wind availability</span></span>
<span><span class="va">windavb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="va">month.abb</span>,</span>
<span>  pctg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">85</span>, <span class="fl">98</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># maintenance downtime</span></span>
<span><span class="va">dwntm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="va">month.abb</span>,</span>
<span>  mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">6</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>  sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># seasons specification</span></span>
<span><span class="va">seas_dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  season_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span>,</span>
<span>  start_month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Jan"</span>, <span class="st">"May"</span>, <span class="st">"Oct"</span><span class="op">)</span>, end_month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Apr"</span>, <span class="st">"Sep"</span>, <span class="st">"Dec"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ----------------------------------------------------------</span></span>
<span><span class="co"># Run stochastic CRM, treating rotor radius, air gap and</span></span>
<span><span class="co"># blade width as fixed parameters (i.e. not stochastic)</span></span>
<span></span>
<span><span class="fu"><a href="reference/stoch_crm.html">stoch_crm</a></span><span class="op">(</span></span>
<span>  model_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  n_iter <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  flt_speed_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">7.26</span>, sd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span>,</span>
<span>  body_lt_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">0.39</span>, sd <span class="op">=</span> <span class="fl">0.005</span><span class="op">)</span>,</span>
<span>  wing_span_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">1.08</span>, sd <span class="op">=</span> <span class="fl">0.04</span><span class="op">)</span>,</span>
<span>  avoid_bsc_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">0.99</span>, sd <span class="op">=</span> <span class="fl">0.001</span><span class="op">)</span>,</span>
<span>  avoid_ext_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">0.96</span>, sd <span class="op">=</span> <span class="fl">0.002</span><span class="op">)</span>,</span>
<span>  noct_act_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">0.033</span>, sd <span class="op">=</span> <span class="fl">0.005</span><span class="op">)</span>,</span>
<span>  prop_crh_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">0.06</span>, sd <span class="op">=</span> <span class="fl">0.009</span><span class="op">)</span>,</span>
<span>  bird_dens_opt <span class="op">=</span> <span class="st">"tnorm"</span>,</span>
<span>  bird_dens_dt <span class="op">=</span> <span class="va">b_dens</span>,</span>
<span>  flight_type <span class="op">=</span> <span class="st">"flapping"</span>,</span>
<span>  prop_upwind <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  gen_fhd_boots <span class="op">=</span> <span class="va">fhd_boots</span>,</span>
<span>  n_blades <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  rtr_radius_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">80</span>, sd <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>, <span class="co"># sd = 0, rotor radius is fixed</span></span>
<span>  air_gap_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">36</span>, sd <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,    <span class="co"># sd = 0, air gap is fixed</span></span>
<span>  bld_width_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">8</span>, sd <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,   <span class="co"># sd = 0, blade width is fixed</span></span>
<span>  rtn_pitch_opt <span class="op">=</span> <span class="st">"windSpeedReltn"</span>,</span>
<span>  windspd_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">7.74</span>, sd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>  rtn_pitch_windspd_dt <span class="op">=</span> <span class="va">wind_rtn_ptch</span>,</span>
<span>  trb_wind_avbl <span class="op">=</span> <span class="va">windavb</span>,</span>
<span>  trb_downtime_pars <span class="op">=</span> <span class="va">dwntm</span>,</span>
<span>  wf_n_trbs <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  wf_width <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  wf_latitude <span class="op">=</span> <span class="fl">56.9</span>,</span>
<span>  tidal_offset <span class="op">=</span> <span class="fl">2.5</span>,</span>
<span>  lrg_arr_corr <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1234</span>,</span>
<span>  out_format <span class="op">=</span> <span class="st">"summaries"</span>,</span>
<span>  out_sampled_pars <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  out_period <span class="op">=</span> <span class="st">"seasons"</span>,</span>
<span>  season_specs <span class="op">=</span> <span class="va">seas_dt</span>,</span>
<span>  log_file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"scrm_example.log"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="multiscenario-example">Multiscenario example<a class="anchor" aria-label="anchor" href="#multiscenario-example"></a>
</h3>
<p>This is an example usage of <code><a href="reference/stoch_crm.html">stoch_crm()</a></code> for multiple scenarios. The aim is two-fold:</p>
<ol style="list-style-type: decimal">
<li><p>Suggest how input parameter datasets used in the previous implementation can be reshaped to fit <code><a href="reference/stoch_crm.html">stoch_crm()</a></code>’s interface. Suggested code is also relevant in the context of multiple scenarios applications, since the wide tabular structure of these datasets is likely the favoured format for users to compile input parameters under different scenarios.</p></li>
<li><p>Propose a functional programming framework to run <code><a href="reference/stoch_crm.html">stoch_crm()</a></code> for multiple species and wind-farm/turbines features.</p></li>
</ol>
<p>Please note the example runs on fictional data.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/HiDef-Aerial-Surveying/stochLAB" class="external-link">stochLAB</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># --------------------------------------------------------- #</span></span>
<span><span class="co"># ----      Reshaping into list-column data frames       ----</span></span>
<span><span class="co"># --------------------------------------------------------- #</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># Here embracing list-columns tibbles, but lists could be used instead</span></span>
<span></span>
<span><span class="co"># --- bird features</span></span>
<span><span class="va">bird_pars</span> <span class="op">&lt;-</span> <span class="va">bird_pars_wide_example</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">relocate</a></span><span class="op">(</span><span class="va">Flight</span>, .after <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">last_col</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="va">AvoidanceBasic</span><span class="op">:</span><span class="va">Prop_CRH_ObsSD</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    par <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"SD|sd|Sd"</span>, <span class="va">name</span><span class="op">)</span>, <span class="st">"sd"</span>, <span class="st">"mean"</span><span class="op">)</span>,</span>
<span>    feature <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"SD|sd|Sd"</span>,<span class="st">""</span>, <span class="va">name</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">name</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">par</span>, values_from <span class="op">=</span> <span class="va">value</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">nest</a></span><span class="op">(</span>pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">mean</span>, <span class="va">sd</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">feature</span>, values_from <span class="op">=</span> <span class="va">pars</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/add_column.html" class="external-link">add_column</a></span><span class="op">(</span>prop_upwind <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># --- bird densities: provided as mean and sd Parameters for Truncated Normal lower</span></span>
<span><span class="co"># bounded at 0</span></span>
<span><span class="va">dens_pars</span> <span class="op">&lt;-</span> <span class="va">dens_tnorm_wide_example</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/add_column.html" class="external-link">add_column</a></span><span class="op">(</span></span>
<span>    dens_opt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"tnorm"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    .after <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="va">Jan</span><span class="op">:</span><span class="va">DecSD</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    par <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"SD|sd|Sd"</span>, <span class="va">name</span><span class="op">)</span>, <span class="st">"sd"</span>, <span class="st">"mean"</span><span class="op">)</span>,</span>
<span>    month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"SD|sd|Sd"</span>,<span class="st">""</span>, <span class="va">name</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">name</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">par</span>, values_from <span class="op">=</span> <span class="va">value</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">nest</a></span><span class="op">(</span>mth_dens <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">month</span>, <span class="va">mean</span>, <span class="va">sd</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># --- FHD data from Johnson et al (2014) for the species under analysis</span></span>
<span><span class="va">gen_fhd_boots</span> <span class="op">&lt;-</span> <span class="va">generic_fhd_bootstraps</span><span class="op">[</span><span class="va">bird_pars</span><span class="op">$</span><span class="va">Species</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># --- seasons definitions (made up)</span></span>
<span><span class="va">season_dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  Arctic_Tern <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    season_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"breeding"</span>, <span class="st">"feeding"</span>, <span class="st">"migrating"</span><span class="op">)</span>,</span>
<span>    start_month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"May"</span>, <span class="st">"Sep"</span>, <span class="st">"Jan"</span><span class="op">)</span>,</span>
<span>    end_month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Aug"</span>, <span class="st">"Dec"</span>, <span class="st">"Apr"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  Black_headed_Gull <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    season_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"breeding"</span>, <span class="st">"feeding"</span>, <span class="st">"migrating"</span><span class="op">)</span>,</span>
<span>    start_month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Jan"</span>, <span class="st">"May"</span>, <span class="st">"Oct"</span><span class="op">)</span>,</span>
<span>    end_month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Apr"</span>, <span class="st">"Sep"</span>, <span class="st">"Dec"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  Black_legged_Kittiwake <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    season_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"breeding"</span>, <span class="st">"feeding"</span>, <span class="st">"migrating"</span><span class="op">)</span>,</span>
<span>    start_month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Dec"</span>, <span class="st">"Mar"</span>, <span class="st">"Sep"</span><span class="op">)</span>,</span>
<span>    end_month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Feb"</span>, <span class="st">"Aug"</span>, <span class="st">"Nov"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># --- turbine parameters</span></span>
<span><span class="co">## address operation parameters first</span></span>
<span><span class="va">trb_opr_pars</span> <span class="op">&lt;-</span> <span class="va">turb_pars_wide_example</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">TurbineModel</span>, <span class="va">JanOp</span><span class="op">:</span><span class="va">DecOpSD</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="va">JanOp</span><span class="op">:</span><span class="va">DecOpSD</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">name</span>, <span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>    par <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"SD|sd|Sd"</span>, <span class="va">name</span><span class="op">)</span> <span class="op">~</span> <span class="st">"sd"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Mean|MEAN|mean"</span>, <span class="va">name</span><span class="op">)</span> <span class="op">~</span> <span class="st">"mean"</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"pctg"</span></span>
<span>    <span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">name</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">par</span>, values_from <span class="op">=</span> <span class="va">value</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">nest</a></span><span class="op">(</span></span>
<span>    wind_avbl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">month</span>, <span class="va">pctg</span><span class="op">)</span>,</span>
<span>    trb_dwntm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">month</span>, <span class="va">mean</span>, <span class="va">sd</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## address turbine features and subsequently merge operation parameters</span></span>
<span><span class="va">trb_pars</span> <span class="op">&lt;-</span> <span class="va">turb_pars_wide_example</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">TurbineModel</span><span class="op">:</span><span class="va">windSpeedSD</span> <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">relocate</a></span><span class="op">(</span><span class="va">RotorSpeedAndPitch_SimOption</span>, .after <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="va">RotorRadius</span><span class="op">:</span><span class="va">windSpeedSD</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    par <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"SD|sd|Sd"</span>, <span class="va">name</span><span class="op">)</span>, <span class="st">"sd"</span>, <span class="st">"mean"</span><span class="op">)</span>,</span>
<span>    feature <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"(SD|sd|Sd)|(Mean|MEAN|mean)"</span>,<span class="st">""</span>, <span class="va">name</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">name</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">par</span>, values_from <span class="op">=</span> <span class="va">value</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">nest</a></span><span class="op">(</span>pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">mean</span>, <span class="va">sd</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">feature</span>, values_from <span class="op">=</span> <span class="va">pars</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">trb_opr_pars</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># --- windspeed, rotation speed and blade pitch relationship</span></span>
<span><span class="va">wndspd_rtn_ptch_example</span></span>
<span></span>
<span><span class="co"># --- windfarm parameters</span></span>
<span><span class="va">wf_pars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  wf_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"wf_1"</span>, <span class="st">"wf_2"</span><span class="op">)</span>,</span>
<span>  n_turbs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fl">400</span><span class="op">)</span>,</span>
<span>  wf_width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>  wf_lat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">55.8</span>, <span class="fl">55.0</span><span class="op">)</span>,</span>
<span>  td_off <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2.5</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  large_array_corr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># -------------------------------------------------------------- #</span></span>
<span><span class="co"># ----      Run stoch_crm() for multiple scenarios           ----</span></span>
<span><span class="co"># -------------------------------------------------------------- #</span></span>
<span></span>
<span><span class="co"># --- Set up scenario combinations</span></span>
<span><span class="va">scenarios_specs</span> <span class="op">&lt;-</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/expand_grid.html" class="external-link">expand_grid</a></span><span class="op">(</span></span>
<span>  spp <span class="op">=</span> <span class="va">bird_pars</span><span class="op">$</span><span class="va">Species</span>,</span>
<span>  turb_id <span class="op">=</span> <span class="va">trb_pars</span><span class="op">$</span><span class="va">TurbineModel</span>,</span>
<span>  wf_id <span class="op">=</span> <span class="va">wf_pars</span><span class="op">$</span><span class="va">wf_id</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/add_column.html" class="external-link">add_column</a></span><span class="op">(</span></span>
<span>    scenario_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"scenario_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    .before <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># --- Set up progress bar for the upcoming iterative mapping step</span></span>
<span><span class="va">pb</span> <span class="op">&lt;-</span> <span class="fu">progress</span><span class="fu">::</span><span class="va">progress_bar</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  format <span class="op">=</span> <span class="st">"Running Scenario: :what [:bar] :percent eta: :eta"</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">scenarios_specs</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># --- Map stoch_crm() to each scenario specification via purrr::pmap</span></span>
<span><span class="va">outputs</span> <span class="op">&lt;-</span> <span class="va">scenarios_specs</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map2.html" class="external-link">pmap</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">scenario_id</span>, <span class="va">spp</span>, <span class="va">turb_id</span>, <span class="va">wf_id</span>, <span class="va">...</span><span class="op">)</span><span class="op">{</span></span>
<span></span>
<span>    <span class="va">pb</span><span class="op">$</span><span class="fu">tick</span><span class="op">(</span>tokens <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>what <span class="op">=</span> <span class="va">scenario_id</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># params for current species</span></span>
<span>    <span class="va">c_spec</span> <span class="op">&lt;-</span> <span class="va">bird_pars</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Species</span> <span class="op">==</span> <span class="op">{</span><span class="op">{</span><span class="va">spp</span><span class="op">}</span><span class="op">}</span><span class="op">)</span> <span class="co"># {{}} to avoid issues with data masking</span></span>
<span></span>
<span>    <span class="co"># density for current species</span></span>
<span>    <span class="va">c_dens</span> <span class="op">&lt;-</span> <span class="va">dens_pars</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Species</span> <span class="op">==</span> <span class="op">{</span><span class="op">{</span><span class="va">spp</span><span class="op">}</span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># params for current turbine scenario</span></span>
<span>    <span class="va">c_turb</span> <span class="op">&lt;-</span> <span class="va">trb_pars</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">TurbineModel</span> <span class="op">==</span> <span class="op">{</span><span class="op">{</span><span class="va">turb_id</span><span class="op">}</span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># params for current windfarm scenario</span></span>
<span>    <span class="va">c_wf</span> <span class="op">&lt;-</span> <span class="va">wf_pars</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">wf_id</span> <span class="op">==</span> <span class="op">{</span><span class="op">{</span><span class="va">wf_id</span><span class="op">}</span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># inputs in list-columns need to be unlisted, either via `unlist()` or</span></span>
<span>    <span class="co"># indexing `[[1]]`</span></span>
<span>    <span class="co"># switching off `verbose`, otherwise console will be # cramped with log</span></span>
<span>    <span class="va">messages</span></span>
<span>    <span class="fu"><a href="reference/stoch_crm.html">stoch_crm</a></span><span class="op">(</span></span>
<span>      model_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>      n_iter <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>      flt_speed_pars <span class="op">=</span> <span class="va">c_spec</span><span class="op">$</span><span class="va">Flight_Speed</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      body_lt_pars <span class="op">=</span> <span class="va">c_spec</span><span class="op">$</span><span class="va">Body_Length</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      wing_span_pars <span class="op">=</span> <span class="va">c_spec</span><span class="op">$</span><span class="va">Wingspan</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      avoid_bsc_pars <span class="op">=</span> <span class="va">c_spec</span><span class="op">$</span><span class="va">AvoidanceBasic</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      avoid_ext_pars <span class="op">=</span> <span class="va">c_spec</span><span class="op">$</span><span class="va">AvoidanceExtended</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      noct_act_pars <span class="op">=</span> <span class="va">c_spec</span><span class="op">$</span><span class="va">Nocturnal_Activity</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      prop_crh_pars <span class="op">=</span> <span class="va">c_spec</span><span class="op">$</span><span class="va">Prop_CRH_Obs</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      bird_dens_opt <span class="op">=</span> <span class="va">c_dens</span><span class="op">$</span><span class="va">dens_opt</span>,</span>
<span>      bird_dens_dt <span class="op">=</span> <span class="va">c_dens</span><span class="op">$</span><span class="va">mth_dens</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      flight_type <span class="op">=</span> <span class="va">c_spec</span><span class="op">$</span><span class="va">Flight</span>,</span>
<span>      prop_upwind <span class="op">=</span> <span class="va">c_spec</span><span class="op">$</span><span class="va">prop_upwind</span>,</span>
<span>      gen_fhd_boots <span class="op">=</span> <span class="va">gen_fhd_boots</span><span class="op">[[</span><span class="va">spp</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      n_blades <span class="op">=</span> <span class="va">c_turb</span><span class="op">$</span><span class="va">Blades</span>,</span>
<span>      rtr_radius_pars <span class="op">=</span> <span class="va">c_turb</span><span class="op">$</span><span class="va">RotorRadius</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      air_gap_pars <span class="op">=</span> <span class="va">c_turb</span><span class="op">$</span><span class="va">HubHeightAdd</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      bld_width_pars <span class="op">=</span> <span class="va">c_turb</span><span class="op">$</span><span class="va">BladeWidth</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      rtn_pitch_opt <span class="op">=</span> <span class="va">c_turb</span><span class="op">$</span><span class="va">RotorSpeedAndPitch_SimOption</span>,</span>
<span>      bld_pitch_pars <span class="op">=</span> <span class="va">c_turb</span><span class="op">$</span><span class="va">Pitch</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      rtn_speed_pars <span class="op">=</span> <span class="va">c_turb</span><span class="op">$</span><span class="va">RotationSpeed</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      windspd_pars <span class="op">=</span> <span class="va">c_turb</span><span class="op">$</span><span class="va">windSpeed</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      rtn_pitch_windspd_dt <span class="op">=</span> <span class="va">wndspd_rtn_ptch_example</span>,</span>
<span>      trb_wind_avbl <span class="op">=</span> <span class="va">c_turb</span><span class="op">$</span><span class="va">wind_avbl</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      trb_downtime_pars <span class="op">=</span> <span class="va">c_turb</span><span class="op">$</span><span class="va">trb_dwntm</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      wf_n_trbs <span class="op">=</span> <span class="va">c_wf</span><span class="op">$</span><span class="va">n_turbs</span>,</span>
<span>      wf_width <span class="op">=</span> <span class="va">c_wf</span><span class="op">$</span><span class="va">wf_width</span>,</span>
<span>      wf_latitude <span class="op">=</span> <span class="va">c_wf</span><span class="op">$</span><span class="va">wf_lat</span>,</span>
<span>      tidal_offset <span class="op">=</span> <span class="va">c_wf</span><span class="op">$</span><span class="va">td_off</span>,</span>
<span>      lrg_arr_corr <span class="op">=</span> <span class="va">c_wf</span><span class="op">$</span><span class="va">large_array_corr</span>,</span>
<span>      verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>      seed <span class="op">=</span> <span class="fl">1234</span>,</span>
<span>      out_format <span class="op">=</span> <span class="st">"summaries"</span>,</span>
<span>      out_sampled_pars <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>      out_period <span class="op">=</span> <span class="st">"seasons"</span>,</span>
<span>      season_specs <span class="op">=</span> <span class="va">season_dt</span><span class="op">[[</span><span class="va">spp</span><span class="op">]</span><span class="op">]</span>,</span>
<span>      log_file <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># --- close progress bar</span></span>
<span><span class="va">pb</span><span class="op">$</span><span class="fu">terminate</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># --- identify elements of output list</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">outputs</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">scenarios_specs</span><span class="op">$</span><span class="va">scenario_id</span></span>
<span></span>
<span><span class="va">outputs</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="band-model-example">Band model example<a class="anchor" aria-label="anchor" href="#band-model-example"></a>
</h3>
<p>This is an example usage of <code><a href="reference/band_crm.html">band_crm()</a></code>. This is for a single species and single set of turbine parameters. This replicates the Band (2012) worksheet. The <code><a href="reference/stoch_crm.html">stoch_crm()</a></code> function wraps around this function, where <code><a href="reference/band_crm.html">band_crm()</a></code> acts in essence as a single draw of <code><a href="reference/stoch_crm.html">stoch_crm()</a></code>.</p>
<p>Please note the example runs on fictional data.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ------------------------------------------------------</span></span>
<span><span class="co"># Run with arbitrary parameter values, for illustration</span></span>
<span><span class="co"># ------------------------------------------------------</span></span>
<span></span>
<span><span class="co"># Setting a dataframe of parameters to draw from</span></span>
<span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  flight_speed <span class="op">=</span> <span class="fl">13.1</span>,         <span class="co"># Flight speed in m/s</span></span>
<span>  body_lt <span class="op">=</span> <span class="fl">0.85</span>,              <span class="co"># Body length in m</span></span>
<span>  wing_span <span class="op">=</span> <span class="fl">1.01</span>,            <span class="co"># Wing span in m</span></span>
<span>  flight_type <span class="op">=</span> <span class="st">"flapping"</span>,    <span class="co"># flapping or gliding flight</span></span>
<span>  avoid_rt_basic <span class="op">=</span> <span class="fl">0.989</span>,      <span class="co"># avoidance rate for option 1 and 2</span></span>
<span>  avoid_rt_ext <span class="op">=</span> <span class="fl">0.981</span>,        <span class="co"># extended avoidance rate for option 3 and 4</span></span>
<span>  noct_activity <span class="op">=</span> <span class="fl">0.5</span>,         <span class="co"># proportion of day birds are inactive</span></span>
<span>  prop_crh_surv <span class="op">=</span> <span class="fl">0.13</span>,        <span class="co"># proportion of birds at collision risk height (option 1 only)</span></span>
<span>  prop_upwind <span class="op">=</span> <span class="fl">0.5</span>,           <span class="co"># proportion of flights that are upwind</span></span>
<span>  rotor_speed <span class="op">=</span> <span class="fl">15</span>,            <span class="co"># rotor speed in m/s</span></span>
<span>  rotor_radius <span class="op">=</span> <span class="fl">120</span>,          <span class="co"># radius of turbine in m</span></span>
<span>  blade_width <span class="op">=</span> <span class="fl">5</span>,             <span class="co"># width of turbine blades at thickest point in m</span></span>
<span>  blade_pitch <span class="op">=</span> <span class="fl">15</span>,            <span class="co"># mean radius pitch in Radians</span></span>
<span>  n_blades <span class="op">=</span> <span class="fl">3</span>,                <span class="co"># total number of blades per turbine</span></span>
<span>  hub_height <span class="op">=</span> <span class="fl">150</span>,            <span class="co"># height of hub in m above HAT</span></span>
<span>  n_turbines <span class="op">=</span> <span class="fl">100</span>,            <span class="co"># number of turbines in the wind farm</span></span>
<span>  wf_width <span class="op">=</span> <span class="fl">52</span>,               <span class="co"># width across longest section of wind farm</span></span>
<span>  wf_latitude <span class="op">=</span> <span class="fl">56</span>,            <span class="co"># latitude of centroid of wind farm</span></span>
<span>  tidal_offset <span class="op">=</span> <span class="fl">2.5</span>,          <span class="co"># mean tidal offset from HAT of the wind farm</span></span>
<span>  lrg_arr_corr <span class="op">=</span> <span class="cn">TRUE</span>          <span class="co"># apply a large array correction?</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Monthly bird densities</span></span>
<span><span class="va">b_dens</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="va">month.abb</span>,</span>
<span>  dens <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">0.8</span>, <span class="fl">1.5</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># flight height distribution from Johnston et al</span></span>
<span><span class="va">gen_fhd_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  height <span class="op">=</span> <span class="va">Johnston_Flight_heights_SOSS</span><span class="op">$</span><span class="va">Height</span>,</span>
<span>  prop <span class="op">=</span> <span class="va">Johnston_Flight_heights_SOSS</span><span class="op">$</span><span class="va">Gannet.est</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># monthly operational time of the wind farm</span></span>
<span><span class="va">turb_oper</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="va">month.abb</span>,</span>
<span>  prop_oper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">12</span>,<span class="fl">0.5</span>,<span class="fl">0.8</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="reference/band_crm.html">band_crm</a></span><span class="op">(</span></span>
<span>  model_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>,</span>
<span>  flight_speed <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">flight_speed</span>,</span>
<span>  body_lt <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">body_lt</span>,</span>
<span>  wing_span <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">wing_span</span>,</span>
<span>  flight_type <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">flight_type</span>,</span>
<span>  avoid_rt_basic <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">avoid_rt_basic</span>,</span>
<span>  avoid_rt_ext <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">avoid_rt_ext</span>,</span>
<span>  noct_activity <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">noct_activity</span>,</span>
<span>  prop_crh_surv <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">prop_crh_surv</span>,</span>
<span>  dens_month <span class="op">=</span> <span class="va">b_dens</span>,</span>
<span>  prop_upwind <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">prop_upwind</span>,</span>
<span>  gen_fhd <span class="op">=</span> <span class="va">gen_fhd_dat</span>,</span>
<span>  site_fhd <span class="op">=</span> <span class="cn">NULL</span>,  <span class="co"># Option 4 only</span></span>
<span>  rotor_speed <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">rotor_speed</span>,</span>
<span>  rotor_radius <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">rotor_radius</span>,</span>
<span>  blade_width <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">blade_width</span>,</span>
<span>  blade_pitch <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">blade_pitch</span>,</span>
<span>  n_blades <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">n_blades</span>,</span>
<span>  hub_height <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">hub_height</span>,</span>
<span>  chord_prof <span class="op">=</span> <span class="va">chord_prof_5MW</span>,</span>
<span>  n_turbines <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">n_turbines</span>,</span>
<span>  turb_oper_month <span class="op">=</span> <span class="va">turb_oper</span>,</span>
<span>  wf_width <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">wf_width</span>,</span>
<span>  wf_latitude <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">wf_latitude</span>,</span>
<span>  tidal_offset <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">tidal_offset</span>,</span>
<span>  lrg_arr_corr <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">lrg_arr_corr</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="migratory-stochastic-collision-risk-model">Migratory stochastic collision risk model<a class="anchor" aria-label="anchor" href="#migratory-stochastic-collision-risk-model"></a>
</h3>
<p>This is an adaptation of the Band (2012) method for estimating collision risk by migratory species in windfarms. This only runs for <code><a href="reference/crm_opt1.html">crm_opt1()</a></code> and uses estimates of population size and PCH due to the complexity of measuring these parameters in migratory species. The code will return all draws for each defined season.</p>
<p>Please note the example runs on fictional data.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ------------------------------------------------------</span></span>
<span><span class="co"># Run with arbitrary parameter values, for illustration</span></span>
<span><span class="co"># ------------------------------------------------------</span></span>
<span><span class="va">season_specs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  season_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PrBMigration"</span>, <span class="st">"PoBMigration"</span>, <span class="st">"Omigration"</span><span class="op">)</span>,</span>
<span>  start_month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Jan"</span>, <span class="st">"May"</span>, <span class="st">"Oct"</span><span class="op">)</span>, end_month <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Apr"</span>, <span class="st">"Sep"</span>, <span class="st">"Dec"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># wind availability</span></span>
<span><span class="va">windavb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="va">month.abb</span>,</span>
<span>  pctg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">85</span>, <span class="fl">98</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">windavb</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># maintenance downtime</span></span>
<span><span class="va">dwntm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  month <span class="op">=</span> <span class="va">month.abb</span>,</span>
<span>  mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">6</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>  sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dwntm</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="reference/mig_stoch_crm.html">mig_stoch_crm</a></span><span class="op">(</span></span>
<span>  wing_span_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">1.08</span>, sd <span class="op">=</span> <span class="fl">0.04</span><span class="op">)</span>,      <span class="co"># Wing span in m,</span></span>
<span>  flt_speed_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">7.26</span>, sd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span>,       <span class="co"># Flight speed in m/s</span></span>
<span>  body_lt_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">0.39</span>, sd <span class="op">=</span> <span class="fl">0.005</span><span class="op">)</span>,       <span class="co"># Body length in m,</span></span>
<span>  prop_crh_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">0.06</span>, sd <span class="op">=</span> <span class="fl">0.009</span><span class="op">)</span>,      <span class="co"># Proportion of birds at CRH</span></span>
<span>  avoid_bsc_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">0.99</span>, sd <span class="op">=</span> <span class="fl">0.001</span><span class="op">)</span>,     <span class="co"># avoidance rate</span></span>
<span>  n_turbines <span class="op">=</span> <span class="fl">150</span>,</span>
<span>  n_blades <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  rtn_speed_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">13.1</span>, sd <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,         <span class="co"># rotation speed in m/s of turbine blades</span></span>
<span>  bld_pitch_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">3</span>, sd <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>,          <span class="co"># pitch in degrees of turbine blades</span></span>
<span>  rtr_radius_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">80</span>, sd <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,          <span class="co"># sd = 0, rotor radius is fixed</span></span>
<span>  bld_width_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">8</span>, sd <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,            <span class="co"># sd = 0, blade width is fixed</span></span>
<span>  wf_width <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  wf_latitude <span class="op">=</span> <span class="fl">54.1</span>,</span>
<span>  prop_upwind <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  flight_type <span class="op">=</span> <span class="st">"flapping"</span>,</span>
<span>  popn_estim_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">21584</span>, sd <span class="op">=</span> <span class="fl">2023</span><span class="op">)</span>,    <span class="co"># population flying through windfarm,</span></span>
<span>  season_specs <span class="op">=</span> <span class="va">season_specs</span>,</span>
<span>  chord_profile <span class="op">=</span> <span class="va">chord_prof_5MW</span>,</span>
<span>  trb_wind_avbl <span class="op">=</span> <span class="va">windavb</span>,</span>
<span>  trb_downtime_pars <span class="op">=</span> <span class="va">dwntm</span>,</span>
<span>  n_iter <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  LargeArrayCorrection <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  log_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1234</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/HiDef-Aerial-Surveying/stochLAB/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/HiDef-Aerial-Surveying/stochLAB/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing stochLAB</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Grant Humphries <br><small class="roles"> Author, maintainer </small>  </li>
<li>Bruno Caneco <br><small class="roles"> Author </small>  </li>
<li>Marine Scotland <br><small class="roles"> Funder, copyright holder </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Grant Humphries, Bruno Caneco, Marine Scotland.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
